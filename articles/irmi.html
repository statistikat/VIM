<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Imputation Method IRMI • VIM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Imputation Method IRMI">
<meta property="og:description" content="VIM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">VIM</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">6.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/VIM.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/VisualImp.html">Supportive Graphic Methods</a>
    </li>
    <li>
      <a href="../articles/donorImp.html">Donor based Imputation Methods</a>
    </li>
    <li>
      <a href="../articles/irmi.html">Imputation Method IRMI</a>
    </li>
    <li>
      <a href="../articles/modelImp.html">Model based Imputation Methods</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/statistikat/VIM/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="irmi_files/core-js-2.5.3/shim.min.js"></script><script src="irmi_files/react-17.0.0/react.min.js"></script><script src="irmi_files/react-17.0.0/react-dom.min.js"></script><script src="irmi_files/reactwidget-1.0.0/react-tools.js"></script><script src="irmi_files/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="irmi_files/reactable-binding-0.2.3/reactable.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Imputation Method IRMI</h1>
                        <h4 data-toc-skip class="author">Wolfgang Rannetbauer</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statistikat/VIM/blob/HEAD/vignettes/irmi.Rmd" class="external-link"><code>vignettes/irmi.Rmd</code></a></small>
      <div class="hidden name"><code>irmi.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>In addition to Model based Imputation Methods (see <code><a href="../articles/modelImp.html">vignette("modelImp")</a></code>) the <code>VIM</code> package also presents an iterative imputation method.</p>
<p>This vignette showcases the function <code><a href="../reference/irmi.html">irmi()</a></code>. <strong>IRMI</strong> is short for <strong>I</strong>terative <strong>R</strong>obust <strong>M</strong>odel-based <strong>I</strong>mputation. This method can be used to generate imputations for several variables in a dataset.</p>
<p>Basically <code><a href="../reference/irmi.html">irmi()</a></code> mimics the functionality of IVEWARE <a href="https://www.semanticscholar.org/paper/A-multivariate-technique-for-multiply-imputing-a-of-Raghunathan-Lepkowski/13b30e35b9a54dad07094cfe4f50d40ff15d8370?p2df" class="external-link">(Raghunathan et al., 2001)</a>, but there are several improvements with respect to the stability of the initialized values, or the robustness of the imputed values. In contrast to other imputation methods, the IRMI algorithm does not require at least one fully observed variable. In each step of the iteration, one variable is used as a response variable and the remaining variables serve as the regressors. Thus the “whole” multivariate information will be used for imputation in the response variable. For more details, please see <a href="http://file.statistik.tuwien.ac.at/filz/papers/CSDA11TKF.pdf" class="external-link">IRMI Imputation</a>.</p>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The following example demonstrates the functionality of <code><a href="../reference/irmi.html">irmi()</a></code> using a subset of <code>sleep</code>. The columns have been selected deliberately to include some interactions between the missing values.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/statistikat/VIM" class="external-link">VIM</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span>
<span class="va">dataset</span> <span class="op">&lt;-</span> <span class="va">sleep</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Dream"</span>, <span class="st">"NonD"</span>, <span class="st">"BodyWgt"</span>, <span class="st">"Span"</span><span class="op">)</span><span class="op">]</span>
<span class="va">dataset</span><span class="op">$</span><span class="va">BodyWgt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">$</span><span class="va">BodyWgt</span><span class="op">)</span>
<span class="va">dataset</span><span class="op">$</span><span class="va">Span</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">$</span><span class="va">Span</span><span class="op">)</span>
<span class="fu"><a href="../reference/aggr.html">aggr</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span></code></pre></div>
<p><img src="irmi_files/figure-html/setup-1.png" width="576" style="display: block; margin: auto;"></p>
<p>The plot indicates several missing values in <code>Dream</code>, <code>NonD</code>, and <code>Span.</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">dataset</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt;   Dream    NonD BodyWgt    Span </span>
<span class="co">#&gt;      12      14       0       4</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="imputing-multiple-variables">Imputing multiple variables<a class="anchor" aria-label="anchor" href="#imputing-multiple-variables"></a>
</h2>
<p>The call of the function is straightforward and the algorithm usually converges in a few iterations.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">imp_irmi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/irmi.html">irmi</a></span><span class="op">(</span><span class="va">dataset</span><span class="op">)</span>
<span class="fu"><a href="../reference/aggr.html">aggr</a></span><span class="op">(</span><span class="va">imp_irmi</span>, delimiter <span class="op">=</span> <span class="st">"_imp"</span><span class="op">)</span></code></pre></div>
<p><img src="irmi_files/figure-html/unnamed-chunk-3-1.png" width="576" style="display: block; margin: auto;"></p>
<p>We can see that <code><a href="../reference/irmi.html">irmi()</a></code> imputed all missing values for all variables in our dataset.</p>
<div class="section level3">
<h3 id="diagnosing-the-results">Diagnosing the results<a class="anchor" aria-label="anchor" href="#diagnosing-the-results"></a>
</h3>
<p>As we can see in the next plot, for imputing missing values in <code>NonD</code> <code>Bodygt</code> plays an important role. The original data structure of <code>NonD</code> and <code>BodyWgt</code> is preserved by the <code><a href="../reference/irmi.html">irmi()</a></code> imputation method.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">imp_irmi</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NonD"</span>, <span class="st">"BodyWgt"</span>, <span class="st">"NonD_imp"</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/marginplot.html">marginplot</a></span><span class="op">(</span>delimiter <span class="op">=</span> <span class="st">"_imp"</span><span class="op">)</span></code></pre></div>
<p><img src="irmi_files/figure-html/unnamed-chunk-4-1.png" width="576" style="display: block; margin: auto;"></p>
<p>The same is true for the data structure of <code>Span</code> and <code>BodyWgt</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">imp_irmi</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Span"</span>, <span class="st">"BodyWgt"</span>, <span class="st">"Span_imp"</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/marginplot.html">marginplot</a></span><span class="op">(</span>delimiter <span class="op">=</span> <span class="st">"_imp"</span><span class="op">)</span></code></pre></div>
<p><img src="irmi_files/figure-html/unnamed-chunk-5-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="performance-of-method">Performance of method<a class="anchor" aria-label="anchor" href="#performance-of-method"></a>
</h2>
<p>In order to validate the performance of <code><a href="../reference/irmi.html">irmi()</a></code> and to highlight the ability to impute different datatypes the <code>iris</code> dataset is used. Firstly, some values are randomly set to <code>NA</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>
<span class="va">df</span> <span class="op">&lt;-</span> <span class="va">iris</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"S.Length"</span>, <span class="st">"S.Width"</span>, <span class="st">"P.Length"</span>, <span class="st">"P.Width"</span>, <span class="st">"Species"</span><span class="op">)</span>
<span class="co"># randomly produce some missing values in the data</span>
<span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>
<span class="va">nbr_missing</span> <span class="op">&lt;-</span> <span class="fl">50</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>row <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">nbr_missing</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
                col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">iris</span><span class="op">)</span>, size <span class="op">=</span> <span class="va">nbr_missing</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span>
<span class="va">y</span> <span class="op">&lt;-</span> <span class="va">y</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span>, <span class="op">]</span>
<span class="va">df</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span>

<span class="fu"><a href="../reference/aggr.html">aggr</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></code></pre></div>
<p><img src="irmi_files/figure-html/unnamed-chunk-6-1.png" width="576" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">df</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; S.Length  S.Width P.Length  P.Width  Species </span>
<span class="co">#&gt;       10        9        8       10       12</span></code></pre></div>
<p>We can see that there are missings in all variables and some observations reveal missing values on several points.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">imp_irmi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/irmi.html">irmi</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span>
<span class="fu"><a href="../reference/aggr.html">aggr</a></span><span class="op">(</span><span class="va">imp_irmi</span>, delimiter <span class="op">=</span> <span class="st">"imp"</span><span class="op">)</span></code></pre></div>
<p><img src="irmi_files/figure-html/unnamed-chunk-7-1.png" width="576" style="display: block; margin: auto;"></p>
<p>The plot indicates that all missing values have been imputed by the IRMI algorithm. The following table displays the rounded first five results of the imputation for all variables.</p>
<div id="htmlwidget-c86510d37e8428da6b9e" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c86510d37e8428da6b9e">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"TRUE1":["6.4","7","5.4","6.5","7.6"],"IMPUTED1":["6.95","6.41","6.27","6.55","7.77"],"TRUE2":["4.1","2.7","2.8","3.8","3.5"],"IMPUTED2":["3.04","2.7","2.53","3.62","3.35"],"TRUE3":["4.1","4.1","3.9","5.1","4.7"],"IMPUTED3":["4.17","4.42","4.52","5.27","4.87"],"TRUE4":["0.2","0.2","0.3","1.5","0.2"],"IMPUTED4":["0.16","0.15","0.5","1.38","0.15"],"TRUE5":["setosa","virginica","versicolor","versicolor","virginica"],"IMPUTED5":["setosa","virginica","versicolor","versicolor","virginica"]},"columns":[{"accessor":"TRUE1","name":"True","type":"character"},{"accessor":"IMPUTED1","name":"Imputed","type":"character"},{"accessor":"TRUE2","name":"True","type":"character"},{"accessor":"IMPUTED2","name":"Imputed","type":"character"},{"accessor":"TRUE3","name":"True","type":"character"},{"accessor":"IMPUTED3","name":"Imputed","type":"character"},{"accessor":"TRUE4","name":"True","type":"character"},{"accessor":"IMPUTED4","name":"Imputed","type":"character"},{"accessor":"TRUE5","name":"True","type":"character"},{"accessor":"IMPUTED5","name":"Imputed","type":"character"}],"columnGroups":[{"name":"S.Length","columns":["TRUE1","IMPUTED1"]},{"name":"S.Width","columns":["TRUE2","IMPUTED2"]},{"name":"P.Length","columns":["TRUE3","IMPUTED3"]},{"name":"P.Width","columns":["TRUE4","IMPUTED4"]},{"name":"Species","columns":["TRUE5","IMPUTED5"]}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"highlight":true,"bordered":true,"striped":true,"dataKey":"2f94cb7c4a7473f8ea317dc99c8ba877","key":"2f94cb7c4a7473f8ea317dc99c8ba877"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Matthias Templ, Alexander Kowarik, Andreas Alfons, Gregor de Cillia, Wolfgang Rannetbauer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
